@tailwind base;
@tailwind components;
@tailwind utilities;

/* =================================== */
/*             Base Layer              */
/* =================================== */
@layer base {
  :root {
    /* ---- Light Mode Variables ---- */
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 240 5.9% 10%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 5.9% 10%;
    --radius: 0.75rem; /* consistent rounding */

    /* Chart colors */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    /* Sidebar Colors */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 0 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    /* ---- Dark Mode Variables ---- */
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
    --radius: 0.75rem;

    /* Dark Mode Chart Colors */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;

    /* Dark Mode Sidebar */
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  /* Global resets & defaults */
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* =================================== */
/*        Numbered Code Lines          */
/* =================================== */
code {
  counter-reset: step;
  counter-increment: step 0;
}

code .line::before {
  content: counter(step);
  counter-increment: step;
  width: 1rem;
  padding-right: 1.5rem;
  display: inline-block;
  position: sticky;
  left: 0;
  background-color: white;
  text-align: right;
  color: rgba(115, 138, 148, 0.4);
}

/* =================================== */
/*       Custom Scrollbar Classes      */
/* =================================== */
.dub-scrollbar {
  scrollbar-width: auto; /* for Firefox */
  scrollbar-color: #d1d5db #ffffff;
}

.dub-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dub-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.dub-scrollbar::-webkit-scrollbar-thumb {
  background-color: #d1d5db;
  border-radius: 10px;
}

@layer utilities {
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* =================================== */
/*   Clerk / .cl-* Overhaul (Modern)   */
/* =================================== */

/* Buttons */
.cl-formButtonPrimary {
  @apply text-primary-foreground ring-offset-background border-input /* Thick + */ bg-primary hover:bg-primary/90 focus-visible:ring-ring inline-flex h-9 items-center justify-center whitespace-nowrap rounded-[var(--radius)] border border-2 px-3 font-medium shadow shadow-xl transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
}

button[data-localization-key="userProfile.start.dangerSection.deleteAccountButton"] {
  @apply border-destructive bg-destructive text-destructive-foreground hover:bg-destructive/90 border-2 shadow-xl transition-all duration-200 ease-in-out hover:shadow-2xl;
}

.cl-fileDropAreaButtonPrimary {
  @apply text-foreground border-input hover:bg-secondary hover:text-accent-foreground h-10 rounded-[var(--radius)] border-2 px-4 py-2 shadow-xl transition-all duration-200 ease-in-out hover:shadow-2xl;
}

.cl-userButtonPopoverActionButton,
.cl-profileSectionPrimaryButton,
.cl-accordionTriggerButton,
.cl-navbarButton {
  @apply border-input hover:bg-accent hover:text-accent-foreground rounded-[var(--radius)] border-2 shadow-xl transition-all duration-200 ease-in-out hover:shadow-2xl;
}

.cl-formButtonReset {
  @apply border-input text-foreground hover:bg-secondary rounded-[var(--radius)] border-2 shadow-xl transition-all duration-200 ease-in-out hover:shadow-2xl;
}

/* Cards, Popovers, Alerts, etc. */
.cl-card,
.cl-socialButtonsBlockButton,
.cl-alert,
.cl-phoneInputBox,
.cl-userButtonPopoverCard {
  @apply border-input bg-background rounded-[var(--radius)] border-2 shadow-xl transition-all duration-200 ease-in-out hover:shadow-2xl;
}

/* Provide an extra drop shadow for main cards */
.cl-card {
  @apply shadow-xl hover:shadow-2xl;
}

/* Popover card just a tad lighter shadow (optional) */
.cl-userButtonPopoverCard {
  @apply shadow-xl hover:shadow-2xl;
}

/* Titles, Labels, Text */
.cl-headerTitle,
.cl-socialButtonsBlockButtonText,
.cl-loading,
.cl-formFieldLabel,
.cl-formHeaderTitle,
.cl-selectButton__countryCode,
.cl-selectButton__countryCode p,
.cl-selectOption p,
.cl-selectOption div,
.cl-modalCloseButton,
.cl-navbarButton,
.cl-breadcrumbsItem.cl-breadcrumbsItem__currentPage,
.cl-profileSectionTitle p,
.cl-userPreviewTextContainer,
.cl-profileSectionContent p,
.cl-form p,
.cl-accordionTriggerButton {
  @apply dark:text-foreground;
}

.cl-headerSubtitle,
.cl-dividerText,
.cl-footerActionText,
.cl-alertText,
.cl-formFieldInfoText,
.cl-formFieldSuccessText,
.cl-identityPreviewText,
.cl-userButtonPopoverActionButton,
.cl-userButtonPopoverActionButton svg,
.cl-userButtonPopoverActionButtonText,
.cl-userButtonPopoverFooter p,
.cl-userButtonPopoverFooter a,
.cl-formHeaderSubtitle,
.cl-breadcrumbsItem,
.cl-breadcrumbsItemDivider,
.cl-fileDropAreaHint,
.cl-fileDropAreaFooterHint,
.cl-form
  p[data-localization-key="userProfile.emailAddressPage.emailCode.formHint"],
p[data-localization-key="userProfile.profilePage.successMessage"] {
  @apply text-muted-foreground;
}

/* Dividers & Lines */
.cl-dividerLine {
  @apply bg-border;
}

/* Form Inputs */
.cl-formFieldInput[type="text"],
.cl-formFieldInput[type="email"],
.cl-formFieldInput[type="password"] {
  @apply border-input bg-background text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-[var(--radius)] border-2 px-3 py-2 shadow-xl transition-all duration-200 ease-in-out file:border-0 file:bg-transparent file:text-sm file:font-medium focus:shadow-2xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
}

/* Links / Resend / Accents */
.cl-footerActionLink {
  @apply text-accent-foreground hover:text-accent-foreground/90 underline transition-colors duration-200 ease-in-out;
}

.cl-otpCodeFieldInput {
  @apply !border-input text-foreground !border-2;
}

.cl-formResendCodeLink {
  @apply text-primary disabled:opacity-90;
}

/* Country Code Select */
.cl-selectSearchInput__countryCode {
  @apply border-input bg-background text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-[var(--radius)] border-b-2 transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
}

.cl-selectOptionsContainer__countryCode {
  @apply border-input bg-background border-2 shadow-xl;
}

/* Icons */
.cl-internal-icon,
.cl-userPreviewSecondaryIdentifier__userButton {
  @apply text-foreground;
}

/* File Drop Area (Dark Mode Examples) */
.cl-fileDropAreaBox {
  @apply dark:bg-gray-900;
}
.cl-fileDropAreaIconBox {
  @apply dark:bg-gray-800;
}
.cl-fileDropAreaIcon {
  @apply dark:text-gray-400;
}

/* Badges */
.cl-badge {
  @apply border-input bg-background text-foreground inline-flex items-center justify-center rounded-full border-2 px-2.5 py-0.5 text-xs !shadow-xl transition-all duration-200 ease-in-out hover:shadow-2xl;
}
.cl-badge[data-localization-key="badge__unverified"] {
  @apply border-destructive text-destructive bg-transparent dark:text-red-500;
}

/* Footers, Navbars, etc. */
.cl-footer {
  @apply bg-background from-background to-background text-muted-foreground rounded-b-[var(--radius)] border-x-2 border-b-2 bg-gradient-to-t;
}
.cl-userButtonPopoverFooter {
  @apply from-background to-background rounded-b-[var(--radius)] bg-gradient-to-t;
}

.cl-signIn-start,
.cl-signUp-start,
.cl-signIn-password,
.cl-signIn-alternativeMethods,
.cl-signIn-emailCode {
  @apply rounded-b-none border-b-0;
}

.cl-cardBox {
  @apply border-input rounded-[var(--radius)] border-2 shadow-xl;
}

.cl-socialButtonsBlockButton {
  @apply border-input h-10 !border-2 shadow-xl transition-all duration-200 ease-in-out hover:shadow-2xl;
}
.cl-alternativeMethods .cl-alternativeMethodsBlockButton {
  @apply border-input text-muted-foreground h-10 !border-2 shadow-xl;
}
.cl-alternativeMethodsBlockButton {
  @apply h-10 !shadow-xl;
}

/* Navbar & Scroll Box */
.cl-navbar {
  @apply from-background to-background rounded-[var(--radius)] border-y-2 border-l-2 bg-gradient-to-t shadow-xl;
}
.cl-scrollBox {
  @apply border-input from-background to-background rounded-[var(--radius)] rounded-l-none border-2 bg-gradient-to-t shadow-xl;
}

/* Profile & Menu Items */
h1[data-localization-key="userProfile.navbar.title"] {
  @apply text-foreground;
}
.cl-profilePage > .cl-header {
  @apply border-b-2;
}
.cl-profileSection__profile,
.cl-profileSection__emailAddresses {
  @apply border-b-2;
}
.cl-menuButton {
  @apply text-foreground hover:text-foreground transition-colors duration-200 ease-in-out;
}
.cl-menuList {
  @apply border-input bg-background border-2 shadow-xl;
}
.cl-actionCard {
  @apply border-input bg-background border-2 shadow-xl;
}
.cl-menuItem[data-color="neutral"] {
  @apply text-foreground hover:bg-muted transition-colors duration-200 ease-in-out;
}
.cl-avatarImageActionsUpload {
  @apply !border-input text-foreground !border-2 transition-all duration-200 ease-in-out;
}

/* Popover Panel */
.cl-userButtonPopoverMain {
  @apply border-input bg-background rounded-[var(--radius)] border-2 shadow-xl;
}

.glass-panel {
  @apply rounded-lg border border-white/10 bg-black/20 backdrop-blur-lg;
}

.command-item {
  @apply cursor-pointer rounded-md px-4 py-2 transition-all duration-200 hover:bg-white/5;
}

.stock-item {
  @apply flex items-center space-x-4 rounded-lg p-4 transition-all duration-200 hover:bg-white/5;
}

.fade-in {
  animation: fadeIn 0.5s ease-out forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
