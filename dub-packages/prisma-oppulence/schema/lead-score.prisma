model LeadScore {
  id              String    @id @default(cuid())
  leadId          String    @unique
  lead            Lead      @relation(fields: [leadId], references: [id], onDelete: Cascade)
  
  // Behavioral Scoring
  websiteVisits   Int       @default(0)
  emailEngagement Float     @default(0.0)  // 0-1 scale
  socialEngagement Float    @default(0.0)  // 0-1 scale
  contentDownloads Int      @default(0)
  
  // Demographic Scoring
  companySizeScore    Float @default(0.0)
  industryScore       Float @default(0.0)
  budgetScore         Float @default(0.0)
  technicalFitScore   Float @default(0.0)
  
  // Engagement Scoring
  meetingAttendance   Float @default(0.0)
  responseTime        Float @default(0.0)
  interactionQuality  Float @default(0.0)
  
  // Weighted Scores
  behavioralWeight    Float @default(0.33)
  demographicWeight   Float @default(0.33)
  engagementWeight    Float @default(0.34)
  
  // Final Scores
  totalScore          Float @default(0.0)
  scoreHistory        LeadScoreHistory[]
  
  // Scoring Method
  scoringMethod       LeadScoringMethod @default(basic)
  lastCalculated      DateTime @default(now())
  nextRecalculation   DateTime?
  
  // ML Features
  mlFeatures          Json?    // Store ML-specific scoring features
  confidenceScore     Float?   // ML prediction confidence
  
  @@index([leadId])
}

model LeadScoreHistory {
  id              String    @id @default(cuid())
  leadScoreId     String
  leadScore       LeadScore @relation(fields: [leadScoreId], references: [id], onDelete: Cascade)
  previousScore   Float
  newScore        Float
  changeReason    String?   @db.Text
  timestamp       DateTime  @default(now())
  
  @@index([leadScoreId])
}